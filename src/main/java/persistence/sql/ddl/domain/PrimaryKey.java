package persistence.sql.ddl.domain;

import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;

import java.lang.reflect.Field;

public class PrimaryKey {

    private final boolean isPrimaryKey;
    private final GenerationType generationType;

    public PrimaryKey(Field field) {
        this.isPrimaryKey = field.isAnnotationPresent(jakarta.persistence.Id.class);
        this.generationType = createGenerationType(field);
    }

    private GenerationType createGenerationType(Field field) {
        if (field.isAnnotationPresent(GeneratedValue.class)) {
            return field.getAnnotation(GeneratedValue.class).strategy();
        }
        return null;
    }

    public boolean isPrimaryKey() {
        return isPrimaryKey;
    }

    public GenerationType getGenerationType() {
        return generationType;
    }

    public boolean isNotAutoGenerated() {
        return generationType == null || generationType.equals(GenerationType.SEQUENCE);
    }

}
