# jpa-entity-manager

## ğŸš€ 1ë‹¨ê³„ - ì—”í„°í‹° ë§¤í•‘ (EntityPersister)

### ìš”êµ¬ì‚¬í•­ 1 - ì—”í„°í‹°ì˜ ë°ì´í„°ë² ì´ìŠ¤ ë§¤í•‘, ì¿¼ë¦¬ ìƒì„± ë° ì‹¤í–‰

1. EntityPersister: insert ê¸°ëŠ¥ êµ¬í˜„
2. DMLGenerator: update ì¿¼ë¦¬ ìƒì„± êµ¬í˜„
3. EntityPersister: update ê¸°ëŠ¥ êµ¬í˜„
4. EntityPersister: delete ê¸°ëŠ¥ êµ¬í˜„

### ìš”êµ¬ì‚¬í•­ 2 - EntityManager ì˜ ì±…ì„ ì¤„ì—¬ì£¼ê¸°

1. EntityManagerì˜ insert, delete ì±…ì„ ì¤„ì—¬ì£¼ê¸°

## ğŸš€ 2ë‹¨ê³„ - ì—”í„°í‹° ì´ˆê¸°í™” (EntityLoader)

### ìš”êµ¬ì‚¬í•­ 1 - RowMapper ë¦¬íŒ©í„°ë§

### ìš”êµ¬ì‚¬í•­ 2 - EntityManager ì˜ ì±…ì„ ì¤„ì—¬ì£¼ê¸°

## ğŸš€ 3ë‹¨ê³„ - First Level Cache, Dirty Check

### ìš”êµ¬ì‚¬í•­1 - PersistenceContext êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ ë³´ê³  1ì°¨ ìºì‹±ì„ ì ìš©í•´ë³´ì

1. entitiesByKey ì§€ì—° ì´ˆê¸°í™”
2. entitiesByKey ì—ì„œ idë¡œ ì—”í‹°í‹° ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ 1ì°¨ ìºì‹± ì ìš©

### ìš”êµ¬ì‚¬í•­2 - snapshot ë§Œë“¤ê¸°

1. entitySnapshotsByKey ì§€ì—° ì´ˆê¸°í™”
2. ì—”í‹°í‹°ì˜ ì‹ë³„ì ê°’ì„ í‚¤ë¡œ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ì—”í‹°í‹°ì˜ ì´ì „ ìƒíƒœë¥¼ ì €ì¥

### ìš”êµ¬ì‚¬í•­3 - ë”í‹°ì²´í‚¹ êµ¬í˜„

1. ì—”í‹°í‹°ë¥¼ find ì‹œ ìŠ¤ëƒ…ìƒ·ì„ ë§Œë“¤ì–´ ë‘” í›„,
2. ì—”í‹°í‹°ë¥¼ save í•  ë•Œ, ìŠ¤ëƒ…ìƒ·ê³¼ ë¹„êµí•˜ì—¬ ë³€ê²½ ë‚´ìš©ì„ ê°ì§€
3. CustomJpaRepository ì—ì„œ idê°€ ìˆëŠ” ê²½ìš° merge, ì—†ëŠ” ê²½ìš° persist
4. merge ì‹œ ë³€ê²½ì„ ê°ì§€í•˜ì—¬, ë³€ê²½ëœ ê²½ìš° update
